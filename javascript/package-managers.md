# 패키지 매니저

## 1. 패키지 매니저는 뭘까 ?

이름 그대로 프로젝트에서 사용하는 외부 라이브러리(패키지)를 관리하는 도구.

### 주요 기능

- 패키지 설치/제거/업데이트
- 의존성 관리 (dependencies)
- 버전 관리
- 패키지 보안 취약점 체크

### 필요성

- 수많은 패키지들의 효율적인 관리
- 일관된 개발 환경 구성
- 의존성 충돌 해결
- 프로젝트 설정의 표준화

## 2. 패키지 매니저의 종류 및 역사

### 2.1 npm (Node Package Manager)

첫 번째 JavaScript 패키지 매니저

**장점**

- Node.js의 기본 패키지 매니저
- 거대한 생태계
- 간단한 사용법

**단점**

- 느린 설치 속도
- `node_modules` 중복 설치 문제 (의존성 지옥.....)
- 비결정적 설치 (동일 `package.json`으로도 다른 결과) - version range 로 인해 버전 범위 외의 버전이 설치될 수 있음. 따라서 쓰기 권한이 없는 npm ci 등을 사용해 어느정도 .. 해결 가능

### 2.2 Yarn Classic

Facebook이 npm의 문제를 해결하기 위해 개발

**해결한 문제**

- 병렬 설치로 속도 개선
- yarn.lock으로 결정적 설치 보장
- 오프라인 캐시

**단점**

- 여전히 `node_modules` 중복 문제 존재
- 디스크 공간 비효율

### 2.3 Yarn Berry (Plug'n'Play)

node_modules 없는 새로운 패러다임

**장점**

- Zero-install: 의존성을 zip 파일로 저장
- 더 빠른 설치
- 적은 디스크 사용량

**단점**

- 호환성 문제
- 러닝 커브
- 사용해보니 zip파일이 매번 커밋에 포함되었음. 프로젝트의 규모가 커질수록 커밋 크기가 커지는 문제가 있을것으로 예상됨.

### 2.4 pnpm

새로운 접근방식의 패키지 매니저

**장점**

- 내용 기반 파일 시스템으로 중복 제거
- 디스크 공간 효율성
- npm/yarn 명령어와 호환
- 단일 버전 정책으로 의존성 관리 용이
- Monorepo 지원 우수

**단점**

- 상대적으로 새로운 도구
- 일부 호스팅 서비스에서 설정 필요

## 3. pnpm을 선택한 이유

1. **효율성**

   - 디스크 공간 절약
   - 빠른 설치 속도
   - 중복 패키지 제거

2. **안정성**

   - 엄격한 의존성 관리
   - 유령 의존성 방지
   - npm/yarn 호환성

3. **Monorepo 지원**

   - 작업공간(workspace) 관리 우수
   - 효율적인 패키지 공유

4. **실용성**
   - 기존 npm/yarn 사용자들의 쉬운 전환
   - 명확한 의존성 구조
   - 활발한 커뮤니티와 개발

Yarn Berry도 좋은 대안이었지만, pnp를 사용하지 않는다면 .. node_modules를 결국 설치해야 하는데 그럼 두배의 공간을 소모하게 된다. 따라서 호환성 문제, 설정의 복잡성을 고려할 때 pnpm이 더 실용적인 선택.
